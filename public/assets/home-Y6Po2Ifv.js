import{f as c}from"./fetch-eOQ_iHrb.js";const h=document.querySelector(".get_entry");h.addEventListener("click",async()=>{console.log("Klikki toimii"),c("https://healthdiary.northeurope.cloudapp.azure.com/api/entries/1").then(o=>{console.log(o)})});const p=document.querySelector(".get_users");p.addEventListener("click",m);async function m(){console.log("Haetaan kaikki käyttäjät tietokannasta");const n="https://healthdiary.northeurope.cloudapp.azure.com/api/users",e={method:"GET",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};c(n,e).then(t=>{g(t)})}function g(n){console.log(n);const o=document.querySelector(".tbody");o.innerHTML="",n.forEach(e=>{console.log(e.username,e.user_id,e.user_level);const t=document.createElement("tr"),i=document.createElement("td");i.innerText=e.username;const r=document.createElement("td");r.innerText=e.user_level;const s=document.createElement("td"),a=document.createElement("button");a.className="check",a.setAttribute("data-id",e.user_id),a.innerText="Info",s.appendChild(a),a.addEventListener("click",k);const d=document.createElement("td"),l=document.createElement("button");l.className="del",l.setAttribute("data-id",e.user_id),l.innerText="Delete",d.appendChild(l),l.addEventListener("click",E);const u=document.createElement("td");u.innerText=e.user_id,t.appendChild(i),t.appendChild(r),t.appendChild(s),t.appendChild(d),t.appendChild(u),o.appendChild(t)})}function k(){console.log("Klikkasit riviä!")}function E(n){console.log("Poistit käyttäjän"),console.log(n);const o=n.target.attributes["data-id"].value;console.log("Ensimmäinen tapa",o);const e=n.target.parentElement.nextElementSibling.textContent;console.log("Toinen tapa: ",e);const t=`https://healthdiary.northeurope.cloudapp.azure.com/api/users/${o}`,r={method:"DELETE",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};confirm(`Haluatko varmasti poistaa käyttäjän ID: ${o}`)&&c(t,r).then(a=>{console.log(a),m()})}function y(){console.log("Hei, täällä ollaan!");const n="https://healthdiary.northeurope.cloudapp.azure.com/api/auth/me",e={method:"GET",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};c(n,e).then(t=>{console.log(t),document.getElementById("name").innerHTML=t.user.username})}y();document.getElementById("logout").addEventListener("click",function(){alert("Kirjauduttu ulos onnistuneesti! "),localStorage.removeItem("token"),localStorage.removeItem("username"),window.location.href="index.html"});
